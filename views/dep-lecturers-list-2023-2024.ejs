<%- include('partials/headerDep2023_2024') %>

<div class="container">
  <div class="jumbotron ">
    <% if(userUpd != '') { %>
      <div class="alert alert-success alert-dismissible" role="alert">
        <div>Sėkmingai atnaujinta!</div>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      <% } %>
    <h1 class="text-center">Visų katedros dėstytojų sąrašas 2023 - 2024 m. m.</h1>
    <div class="">
      <p class="lead text-center text-danger">Katedros dėstytojų skaičius (patvirtintas direktoriaus įsakymu): <%=depUser.mm2023_2024.katedrosVedejas.katedrosDestytojuSk%></p>
    </div>
    <br>
    <input class="form-control" id="myInput" type="text" placeholder="Ieškoti..">
    <br>
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">Katedra</th>
          <th scope="col">Ataskaitos būsena</th>
          <th scope="col">Rolė</th>
          <th scope="col">Naudotojas</th>
          <th scope="col"></th>
        </tr>
      </thead>
      <%  users.forEach(function(user){ %>
        <% if (user.teachingYear23_24 === false && user.headOfTheDepartment23_24 === true){ %>
          <!--jei katedros vedejas yra TIK katedros vedejas jo sarase nerodo  -->
        <%  } else if (user.teachingYear23_24 === true || user.headOfTheDepartment23_24 === true){ %>
        <div class="database-result-edit ">
          <tbody id="myTable">
            <tr>
              <td><%=user.katedra%></td>
              <td><%=user.busena23_24%></td>
              <td>
                <%if (user.teachingYear23_24 === true && user.headOfTheDepartment23_24 === true){ %>
                katedros vedėjas / dėstytojas
                <%  } else { %>
                dėstytojas
                <%  } %>
            </td>
            <td><span class="font-weight-bold"> <%=user.vardas + " " + user.pavarde%></span></td>
            <td>
              <div class="text-right">
                <div class="btn-group" role="group" aria-label="" id="group">
                  <a type="button" class="btn btn-primary" href="/department/2023-2024/edit-user/<%= user._id %>"> Redaguoti</a>
                  <a type="button" class="btn btn-secondary" href="/department/2023-2024/edit-lecturer-report/<%= user._id %>"> Ataskaita</a>
                </div>
              </div>
            </td>
          </tr>
        </tbody>
      </div>
      <% } %>

      <% }) %>

    </table>
    <br>
    <% if (pages > 0) { %>
<nav aria-label="Page navigation example">
    <ul class="pagination justify-content-center">
        <% if (current == 1) { %>
            <li class="page-item disabled"><a class="page-link">First</a></li>
        <% } else { %>
            <li class="page-item"><a class="page-link" href="/department/2023-2024/lecturers-list/1">First</a></li>
        <% } %>
        <% var i = (Number(current) > 5 ? Number(current) - 4 : 1) %>
        <% if (i !== 1) { %>
            <li class="page-item disabled"><a class="page-link">...</a></li>
        <% } %>

        <% for (; i <= (Number(current) + 4) && i <= pages; i++) { %>
            <% if (i == current) { %>
                <li class="page-item active"><a class="page-link"><%= i %></a></li>
            <% } else { %>
                <li class="disabled"><a class="page-link" href="/department/2023-2024/lecturers-list/<%= i %>"><%= i %></a></li>
            <% } %>
            <% if (i == Number(current) + 4 && i < pages) { %>
                <li class="disabled"><a class="page-link">...</a></li>
            <% } %>
        <% } %>

        <% if (current == pages) { %>
            <li class="page-item disabled"><a class="page-link">Last</a></li>
        <% } else { %>
            <li class="disabled"><a class="page-link" href="/department/2023-2024/lecturers-list/<%= pages %>">Last</a></li>
        <% } %>
    </ul>
</nav>
<% } %>
  </div>
</div>



<%- include('partials/footer') %>
